<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAILY - Loading</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        body, html {
            height: 100%;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'SF Pro Display', 'Helvetica Neue', 'Arial', sans-serif;
            overflow: hidden;
        }
        .container {
            perspective: 800px;
            text-align: center;
        }
        .word {
            display: flex;
            font-size: clamp(2rem, 8vw, 5rem);
            font-weight: 600;
            letter-spacing: 0.1em;
        }
        .char {
            display: inline-block;
            opacity: 0;
            transform: translateY(50px) rotateX(-90deg);
            transition: opacity 0.8s cubic-bezier(0.2, 0.8, 0.2, 1),
                        transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .char.visible {
            opacity: 1;
            transform: translateY(0) rotateX(0deg);
        }
        .char.fade-out {
            opacity: 0 !important;
            transform: scale(0.8);
            transition: opacity 0.5s, transform 0.5s;
        }
        .char.space {
            width: 0.5em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="word" id="word"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const wordElement = document.getElementById('word');
            const text1 = "Dev AI Loop for Your code";
            const text2 = "DAILY";

            const createSpans = (text) => {
                wordElement.innerHTML = '';
                text.split('').forEach(char => {
                    const span = document.createElement('span');
                    span.className = 'char';
                    if (char === ' ') {
                        span.classList.add('space');
                    } else {
                        span.textContent = char;
                    }
                    wordElement.appendChild(span);
                });
                return wordElement.querySelectorAll('.char');
            };

            const animateIn = (elements) => {
                elements.forEach((el, i) => {
                    setTimeout(() => el.classList.add('visible'), i * 60);
                });
            };

            const animateOut = (elements) => {
                elements.forEach((el, i) => {
                    setTimeout(() => el.classList.remove('visible'), i * 60);
                });
            };

            const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

            // Animation sequence
            const chars1 = createSpans(text1);
            await sleep(100);
            animateIn(chars1);

            await sleep(text1.length * 60 + 1000);
            //animateOut(chars1);

            //await sleep(text1.length * 60 + 500);
            const chars2 = createSpans(text2);
            wordElement.style.letterSpacing = '0.2em';
            await sleep(100);
            animateIn(chars2);
            
            await sleep(text2.length * 60 + 2000);
            // Redirect
            window.location.href = '/index';
        });
    </script>
</body>
</html>
